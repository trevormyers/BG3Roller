@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
}

<div class="wrapper">
    <h1>Enter, Simulate, See The Odds</h1>

    <form method="post">
        <div>
            <label for="dc">Enter DC value</label>
            <input type="number" id="dc" name="dc" required>
        </div>

        <div>
            <label for="advantage">Advantage type</label>
            <select id="advantage" name="advantage">
                <option value="None">None</option>
                <option value="Advantage">Advantage</option>
                <option value="Disadvantage">Disadvantage</option>
            </select>
        </div>

        <div>
            <label for="guidance">Guidance</label>
            <input type="checkbox" id="guidance" name="guidance" class="guidance">

            <label for="proficient">Proficient</label>
            <input type="checkbox" id="proficient" name="proficient" class="proficient">
        </div>

        <div id="proficiencyBonusDiv" style="display: none;">
            <label for="proficiencyBonus">Proficiency Bonus</label>
            <input type="number" id="proficiencyBonus" name="proficiencyBonus">
        </div>

        <div>
            <label for="abilityModifier">Ability Modifier</label>
            <input type="number" id="abilityModifier" name="abilityModifier" required>
        </div>

        <button type="submit">Run Simulation</button>
    </form>

    <div class="results">
        <h2>
            <label>Results:</label>
            <span id="results">@string.Format("{0:0.00}", ViewData["SuccessPercentage"])% Success</span>
        </h2>               
    </div>

    <script>
        // Show/hide Proficiency Bonus div based on Proficient checkbox
        var proficientCheckbox = document.getElementById("proficient");
        var proficiencyBonusDiv = document.getElementById("proficiencyBonusDiv");
        var proficiencyBonusInput = document.getElementById("proficiencyBonus");

        proficientCheckbox.addEventListener("change", function () {
            if (proficientCheckbox.checked) {
                proficiencyBonusDiv.style.display = "block";
                proficiencyBonusInput.removeAttribute("disabled"); // Remove the disabled attribute
            } else {
                proficiencyBonusDiv.style.display = "none";
                proficiencyBonusInput.setAttribute("disabled", "disabled"); // Add the disabled attribute
            }
        });
    </script>
</div>